<nav class="main-nav" x-data="{ 
    cartItemCount: (typeof getCookie !== 'undefined' ? getCookie('cartItemCount') : null) || 0,
    mobileMenuOpen: false,
    currentRoute: window.location.hash.slice(2) || 'home'
}" x-init="
    // ì¿ í‚¤ ë³€ê²½ ê°ì§€ë¥¼ ìœ„í•œ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
    window.addEventListener('cartUpdated', () => {
        cartItemCount = (typeof getCookie !== 'undefined' ? getCookie('cartItemCount') : null) || 0;
    });
    
    // ë¼ìš°íŠ¸ ë³€ê²½ ê°ì§€
    window.addEventListener('hashchange', () => {
        currentRoute = window.location.hash.slice(2) || 'home';
    });
">
    <div class="nav-container">
        <!-- ì‚¬ì´íŠ¸ ë¡œê³  -->
        <div class="nav-brand">
            <a @click="navigateTo('home')" class="brand-link">
                <span class="brand-logo">ğŸš€</span>
                <span class="brand-text">ViewLogic</span>
            </a>
        </div>

        <!-- ëª¨ë°”ì¼ í–„ë²„ê±° ë©”ë‰´ ë²„íŠ¼ -->
        <button class="nav-toggle" @click="toggleMobileMenu" :class="{ active: mobileMenuOpen }">
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
            <span class="nav-toggle-bar"></span>
        </button>

        <!-- ì¤‘ì•™ ë„¤ë¹„ê²Œì´ì…˜ ë©”ë‰´ -->
        <div class="nav-menu" :class="{ active: mobileMenuOpen }">
            <ul class="nav-links">
                <li><a @click="navigateTo('home'); closeMobileMenu()" :class="{ active: currentRoute === 'home' }">Home</a></li>
                <li><a @click="navigateTo('about'); closeMobileMenu()" :class="{ active: currentRoute === 'about' }">About</a></li>
                <li class="has-dropdown">
                    <a href="javascript:void(0)" class="dropdown-toggle">ì„œë¹„ìŠ¤</a>
                    <ul class="dropdown-menu">
                        <li><a @click="navigateTo('products'); closeMobileMenu()" :class="{ active: currentRoute === 'products' }">ìƒí’ˆ</a></li>
                        <li><a @click="navigateTo('blog'); closeMobileMenu()" :class="{ active: currentRoute === 'blog' }">ë¸”ë¡œê·¸</a></li>
                        <li><a @click="navigateTo('videos'); closeMobileMenu()" :class="{ active: currentRoute === 'videos' }">ë™ì˜ìƒ</a></li>
                    </ul>
                </li>
                <li><a @click="navigateTo('components'); closeMobileMenu()" :class="{ active: currentRoute === 'components' }">ì»´í¬ë„ŒíŠ¸</a></li>
                <li><a @click="navigateTo('contact'); closeMobileMenu()" :class="{ active: currentRoute === 'contact' }">Contact</a></li>
            </ul>
        </div>

        <!-- ì˜¤ë¥¸ìª½ ìœ í‹¸ë¦¬í‹° ë©”ë‰´ -->
        <div class="nav-utils" :class="{ active: mobileMenuOpen }">
            <!-- ì¥ë°”êµ¬ë‹ˆ -->
            <div class="cart-widget" @click="navigateTo('cart'); closeMobileMenu()">
                <span class="cart-icon">ğŸ›’</span>
                <span class="cart-count" x-show="cartItemCount > 0" x-text="cartItemCount"></span>
            </div>
            
            <!-- ë¡œê·¸ì¸/íšŒì›ê°€ì… -->
            <div class="nav-auth">
                <a @click="navigateTo('login'); closeMobileMenu()" class="auth-link login-link">ë¡œê·¸ì¸</a>
                <a @click="navigateTo('signup'); closeMobileMenu()" class="auth-link signup-link">íšŒì›ê°€ì…</a>
            </div>
        </div>
    </div>
</nav>


<header v-if="showHeader" class="page-header">
    <div class="container">
        <h1>{{ headerTitle || pageTitle }}</h1>
        <p v-if="headerSubtitle" class="subtitle">{{ headerSubtitle }}</p>
    </div>
</header>

<main class="main-content">
    <div class="container">
        <!-- í˜ì´ì§€ ì½˜í…ì¸ ê°€ ì—¬ê¸°ì— ì‚½ì…ë©ë‹ˆë‹¤ -->
        {{ content }}
    </div>
</main>

<footer class="page-footer">
    <div class="container">
        <p>&copy; 2025 ViewLogic App. All rights reserved.</p>
    </div>
</footer>