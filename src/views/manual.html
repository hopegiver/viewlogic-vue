<div id="manual" class="manual-container">
  <div class="manual-wrapper">
    <!-- ì™¼ìª½ ì‚¬ì´ë“œë°” ë©”ë‰´ -->
    <aside class="manual-sidebar">
      <div class="sidebar-header">
        <h2>{{ $t('manual.title') }}</h2>
      </div>
      
      <nav class="sidebar-nav">
        <div class="tree-menu">
          <!-- ê´€ë¦¬ì ë§¤ë‰´ì–¼ ì„¹ì…˜ -->
          <div class="tree-node">
            <div class="tree-node-toggle" @click="toggleTreeNode('admin')" :class="{ expanded: adminSectionOpen }">
              <span class="tree-node-icon">{{ adminSectionOpen ? 'ğŸ“‚' : 'ğŸ“' }}</span>
              <span class="tree-node-label">{{ $t('manual.tabs.admin') }}</span>
            </div>
            
            <div class="tree-children" v-show="adminSectionOpen">
              <!-- ê´€ë¦¬ì ê°œìš” -->
              <div class="tree-leaf" :class="{ active: activePageId === 'admin-overview' }">
                <span class="tree-indent"></span>
                <span class="tree-leaf-icon">ğŸ“„</span>
                <a @click="setActiveContent('admin-overview')" class="tree-leaf-link">
                  {{ $t('manual.admin.overview.title') }}
                </a>
              </div>
              
              <!-- ì‚¬ìš©ì ê´€ë¦¬ -->
              <div class="tree-node">
                <div class="tree-node-toggle" @click="toggleTreeNode('admin-userManagement')" :class="{ expanded: treeNodeStates['admin-userManagement'] }">
                  <span class="tree-indent"></span>
                  <span class="tree-node-icon">{{ treeNodeStates['admin-userManagement'] ? 'ğŸ“‚' : 'ğŸ“' }}</span>
                  <a @click="setActiveContent('admin-userManagement')" class="tree-node-link" :class="{ active: activePageId === 'admin-userManagement' }">
                    {{ $t('manual.admin.userManagement.title') }}
                  </a>
                </div>
                
                <div class="tree-children" v-show="treeNodeStates['admin-userManagement']">
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ“</span>
                    <a @click="scrollToSubsection('addUser')" class="tree-leaf-link">
                      {{ $t('manual.admin.userManagement.addUser.title') }}
                    </a>
                  </div>
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">âœï¸</span>
                    <a @click="scrollToSubsection('editUser')" class="tree-leaf-link">
                      {{ $t('manual.admin.userManagement.editUser.title') }}
                    </a>
                  </div>
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ—‘ï¸</span>
                    <a @click="scrollToSubsection('deleteUser')" class="tree-leaf-link">
                      {{ $t('manual.admin.userManagement.deleteUser.title') }}
                    </a>
                  </div>
                </div>
              </div>
              
              <!-- ì‹œìŠ¤í…œ ì„¤ì • -->
              <div class="tree-node">
                <div class="tree-node-toggle" @click="toggleTreeNode('admin-systemSettings')" :class="{ expanded: treeNodeStates['admin-systemSettings'] }">
                  <span class="tree-indent"></span>
                  <span class="tree-node-icon">{{ treeNodeStates['admin-systemSettings'] ? 'ğŸ“‚' : 'ğŸ“' }}</span>
                  <a @click="setActiveContent('admin-systemSettings')" class="tree-node-link" :class="{ active: activePageId === 'admin-systemSettings' }">
                    {{ $t('manual.admin.systemSettings.title') }}
                  </a>
                </div>
                
                <div class="tree-children" v-show="treeNodeStates['admin-systemSettings']">
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">âš™ï¸</span>
                    <a @click="scrollToSubsection('general')" class="tree-leaf-link">
                      {{ $t('manual.admin.systemSettings.general.title') }}
                    </a>
                  </div>
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ”’</span>
                    <a @click="scrollToSubsection('security')" class="tree-leaf-link">
                      {{ $t('manual.admin.systemSettings.security.title') }}
                    </a>
                  </div>
                </div>
              </div>
              
              <!-- ëª¨ë‹ˆí„°ë§ -->
              <div class="tree-node">
                <div class="tree-node-toggle" @click="toggleTreeNode('admin-monitoring')" :class="{ expanded: treeNodeStates['admin-monitoring'] }">
                  <span class="tree-indent"></span>
                  <span class="tree-node-icon">{{ treeNodeStates['admin-monitoring'] ? 'ğŸ“‚' : 'ğŸ“' }}</span>
                  <a @click="setActiveContent('admin-monitoring')" class="tree-node-link" :class="{ active: activePageId === 'admin-monitoring' }">
                    {{ $t('manual.admin.monitoring.title') }}
                  </a>
                </div>
                
                <div class="tree-children" v-show="treeNodeStates['admin-monitoring']">
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ“‹</span>
                    <a @click="scrollToSubsection('logs')" class="tree-leaf-link">
                      {{ $t('manual.admin.monitoring.logs.title') }}
                    </a>
                  </div>
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ“Š</span>
                    <a @click="scrollToSubsection('performance')" class="tree-leaf-link">
                      {{ $t('manual.admin.monitoring.performance.title') }}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- ì‚¬ìš©ì ë§¤ë‰´ì–¼ ì„¹ì…˜ -->
          <div class="tree-node">
            <div class="tree-node-toggle" @click="toggleTreeNode('user')" :class="{ expanded: userSectionOpen }">
              <span class="tree-node-icon">{{ userSectionOpen ? 'ğŸ“‚' : 'ğŸ“' }}</span>
              <span class="tree-node-label">{{ $t('manual.tabs.user') }}</span>
            </div>
            
            <div class="tree-children" v-show="userSectionOpen">
              <!-- ì‚¬ìš©ì ê°œìš” -->
              <div class="tree-leaf" :class="{ active: activePageId === 'user-overview' }">
                <span class="tree-indent"></span>
                <span class="tree-leaf-icon">ğŸ“„</span>
                <a @click="setActiveContent('user-overview')" class="tree-leaf-link">
                  {{ $t('manual.user.overview.title') }}
                </a>
              </div>
              
              <!-- ì‹œì‘í•˜ê¸° -->
              <div class="tree-node">
                <div class="tree-node-toggle" @click="toggleTreeNode('user-gettingStarted')" :class="{ expanded: treeNodeStates['user-gettingStarted'] }">
                  <span class="tree-indent"></span>
                  <span class="tree-node-icon">{{ treeNodeStates['user-gettingStarted'] ? 'ğŸ“‚' : 'ğŸ“' }}</span>
                  <a @click="setActiveContent('user-gettingStarted')" class="tree-node-link" :class="{ active: activePageId === 'user-gettingStarted' }">
                    {{ $t('manual.user.gettingStarted.title') }}
                  </a>
                </div>
                
                <div class="tree-children" v-show="treeNodeStates['user-gettingStarted']">
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ”‘</span>
                    <a @click="scrollToSubsection('login')" class="tree-leaf-link">
                      {{ $t('manual.user.gettingStarted.login.title') }}
                    </a>
                  </div>
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ§­</span>
                    <a @click="scrollToSubsection('navigation')" class="tree-leaf-link">
                      {{ $t('manual.user.gettingStarted.navigation.title') }}
                    </a>
                  </div>
                </div>
              </div>
              
              <!-- ì£¼ìš” ê¸°ëŠ¥ -->
              <div class="tree-node">
                <div class="tree-node-toggle" @click="toggleTreeNode('user-features')" :class="{ expanded: treeNodeStates['user-features'] }">
                  <span class="tree-indent"></span>
                  <span class="tree-node-icon">{{ treeNodeStates['user-features'] ? 'ğŸ“‚' : 'ğŸ“' }}</span>
                  <a @click="setActiveContent('user-features')" class="tree-node-link" :class="{ active: activePageId === 'user-features' }">
                    {{ $t('manual.user.features.title') }}
                  </a>
                </div>
                
                <div class="tree-children" v-show="treeNodeStates['user-features']">
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ“Š</span>
                    <a @click="scrollToSubsection('dashboard')" class="tree-leaf-link">
                      {{ $t('manual.user.features.dashboard.title') }}
                    </a>
                  </div>
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ‘¤</span>
                    <a @click="scrollToSubsection('profile')" class="tree-leaf-link">
                      {{ $t('manual.user.features.profile.title') }}
                    </a>
                  </div>
                </div>
              </div>
              
              <!-- ë°ì´í„° ê´€ë¦¬ -->
              <div class="tree-node">
                <div class="tree-node-toggle" @click="toggleTreeNode('user-dataManagement')" :class="{ expanded: treeNodeStates['user-dataManagement'] }">
                  <span class="tree-indent"></span>
                  <span class="tree-node-icon">{{ treeNodeStates['user-dataManagement'] ? 'ğŸ“‚' : 'ğŸ“' }}</span>
                  <a @click="setActiveContent('user-dataManagement')" class="tree-node-link" :class="{ active: activePageId === 'user-dataManagement' }">
                    {{ $t('manual.user.dataManagement.title') }}
                  </a>
                </div>
                
                <div class="tree-children" v-show="treeNodeStates['user-dataManagement']">
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ‘ï¸</span>
                    <a @click="scrollToSubsection('view')" class="tree-leaf-link">
                      {{ $t('manual.user.dataManagement.view.title') }}
                    </a>
                  </div>
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ“¤</span>
                    <a @click="scrollToSubsection('export')" class="tree-leaf-link">
                      {{ $t('manual.user.dataManagement.export.title') }}
                    </a>
                  </div>
                </div>
              </div>
              
              <!-- ë¬¸ì œ í•´ê²° -->
              <div class="tree-node">
                <div class="tree-node-toggle" @click="toggleTreeNode('user-troubleshooting')" :class="{ expanded: treeNodeStates['user-troubleshooting'] }">
                  <span class="tree-indent"></span>
                  <span class="tree-node-icon">{{ treeNodeStates['user-troubleshooting'] ? 'ğŸ“‚' : 'ğŸ“' }}</span>
                  <a @click="setActiveContent('user-troubleshooting')" class="tree-node-link" :class="{ active: activePageId === 'user-troubleshooting' }">
                    {{ $t('manual.user.troubleshooting.title') }}
                  </a>
                </div>
                
                <div class="tree-children" v-show="treeNodeStates['user-troubleshooting']">
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">â—</span>
                    <a @click="scrollToSubsection('commonIssues')" class="tree-leaf-link">
                      {{ $t('manual.user.troubleshooting.commonIssues.title') }}
                    </a>
                  </div>
                  <div class="tree-leaf">
                    <span class="tree-indent"></span>
                    <span class="tree-indent"></span>
                    <span class="tree-leaf-icon">ğŸ’¬</span>
                    <a @click="scrollToSubsection('support')" class="tree-leaf-link">
                      {{ $t('manual.user.troubleshooting.support.title') }}
                    </a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </nav>
    </aside>

    <!-- ì˜¤ë¥¸ìª½ ì½˜í…ì¸  ì˜ì—­ -->
    <main class="manual-main">
      <div class="main-header">
        <h1>{{ currentTitle }}</h1>
        <p class="main-description">{{ $t('manual.description') }}</p>
      </div>

      <div class="manual-content">
        <!-- ë™ì  ì»¨í…ì¸  ë¡œë“œ -->
        <div v-if="activePageId">
          <HtmlInclude 
            :src="`/manuals/${activePageId}.html`"
            :sanitize="true"
            :use-cache="true"
            loading-text="ë§¤ë‰´ì–¼ ë¡œë”© ì¤‘..."
            wrapper-class="manual-page-content"
          />
        </div>
        
        <!-- ê¸°ë³¸ ì»¨í…ì¸  (í˜ì´ì§€ê°€ ì„ íƒë˜ì§€ ì•Šì€ ê²½ìš°) -->
        <div v-else class="section">
          <h2>{{ $t('manual.title') }}</h2>
          <p>{{ $t('manual.description') }}</p>
          <p>ì™¼ìª½ ë©”ë‰´ì—ì„œ í•­ëª©ì„ ì„ íƒí•´ì£¼ì„¸ìš”.</p>
        </div>
      </div>

      <div class="manual-footer">
        <p>{{ $t('manual.footer.lastUpdated') }}: {{ lastUpdated }}</p>
        <p>{{ $t('manual.footer.version') }}: v1.0.0</p>
      </div>
    </main>
  </div>
</div>