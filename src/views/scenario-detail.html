<div class="scenario-detail-page">
    <!-- ÏãúÎÇòÎ¶¨Ïò§ Ìó§Îçî -->
    <div class="scenario-hero">
        <div class="hero-background">
            <img :src="scenario.coverImage" :alt="scenario.title" class="hero-bg-image" />
            <div class="hero-overlay"></div>
        </div>
        
        <div class="hero-content">
            <div class="hero-info">
                <!-- Îí§Î°úÍ∞ÄÍ∏∞ Î≤ÑÌäº -->
                <button @click="goBack" class="back-button">
                    ‚Üê ÏãúÎÇòÎ≤ÑÏä§Î°ú ÎèåÏïÑÍ∞ÄÍ∏∞
                </button>
                
                <!-- ÏãúÎÇòÎ¶¨Ïò§ Í∏∞Î≥∏ Ï†ïÎ≥¥ -->
                <div class="scenario-header">
                    <div class="scenario-cover">
                        <img :src="scenario.coverImage" :alt="scenario.title" />
                        <div class="cover-badges">
                            <span v-if="scenario.isNew" class="badge new">NEW</span>
                            <span v-if="scenario.isHot" class="badge hot">HOT</span>
                            <span v-if="scenario.isCompleted" class="badge completed">ÏôÑÍ≤∞</span>
                        </div>
                    </div>
                    
                    <div class="scenario-info">
                        <h1 class="scenario-title">{{ scenario.title }}</h1>
                        <p class="scenario-author">ÏûëÍ∞Ä: {{ scenario.author }}</p>
                        <p class="scenario-genre">Ïû•Î•¥: {{ scenario.genre }}</p>
                        
                        <div class="scenario-stats">
                            <div class="stat-item">
                                <span class="stat-icon">‚≠ê</span>
                                <span class="stat-value">{{ scenario.rating }}</span>
                                <span class="stat-label">({{ formatNumber(scenario.reviewCount) }})</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">üë•</span>
                                <span class="stat-value">{{ formatNumber(scenario.subscribers) }}</span>
                                <span class="stat-label">Íµ¨ÎèÖÏûê</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-icon">üìö</span>
                                <span class="stat-value">{{ scenario.episodeCount }}</span>
                                <span class="stat-label">Ìôî</span>
                            </div>
                        </div>
                        
                        <div class="scenario-tags">
                            <span 
                                v-for="tag in scenario.tags" 
                                :key="tag"
                                class="tag"
                            >#{{ tag }}</span>
                        </div>
                        
                        <!-- Í∞ÄÍ≤© Ï†ïÎ≥¥ -->
                        <div class="scenario-pricing">
                            <div class="pricing-options">
                                <div class="pricing-option main" v-if="!scenario.isPurchased">
                                    <div class="price-info">
                                        <span class="price-label">Ï†ÑÏ≤¥ Íµ¨Îß§</span>
                                        <div class="price-display">
                                            <span class="original-price">{{ formatPrice(scenario.originalPrice) }}</span>
                                            <span class="sale-price">{{ formatPrice(scenario.salePrice) }}</span>
                                            <span class="discount-badge">{{ scenario.discount }}% Ìï†Ïù∏</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="pricing-option monthly" v-if="!scenario.isPurchased">
                                    <div class="price-info">
                                        <span class="price-label">ÏõîÍ∞Ñ Ïù¥Ïö©Í∂å</span>
                                        <div class="price-display">
                                            <span class="monthly-price">{{ formatPrice(scenario.monthlyPrice) }}/Ïõî</span>
                                        </div>
                                    </div>
                                </div>
                                <div class="pricing-option purchased" v-if="scenario.isPurchased">
                                    <div class="price-info">
                                        <span class="price-label">Íµ¨Îß§ ÏôÑÎ£å</span>
                                        <div class="price-display">
                                            <span class="purchased-text">‚úì Î¨¥Ï†úÌïú Ïù¥Ïö© Í∞ÄÎä•</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ïï°ÏÖò Î≤ÑÌäºÎì§ -->
                        <div class="action-buttons">
                            <button 
                                v-if="!scenario.isPurchased"
                                @click="purchaseOption('full')"
                                class="purchase-btn"
                            >
                                <span class="btn-icon">üíé</span>
                                Ï†ÑÏ≤¥ Íµ¨Îß§
                            </button>
                            
                            <button 
                                v-if="!scenario.isPurchased"
                                @click="purchaseOption('monthly')"
                                class="monthly-btn"
                            >
                                <span class="btn-icon">üìÖ</span>
                                ÏõîÍ∞Ñ Ïù¥Ïö©Í∂å
                            </button>
                            
                            <button 
                                @click="toggleSubscription"
                                class="subscribe-btn"
                                :class="{ subscribed: scenario.isSubscribed }"
                            >
                                <span class="btn-icon">{{ scenario.isSubscribed ? 'üíñ' : 'ü§ç' }}</span>
                                {{ scenario.isSubscribed ? 'Íµ¨ÎèÖÏ§ë' : 'Íµ¨ÎèÖÌïòÍ∏∞' }}
                            </button>
                            
                            <button @click="shareScenario" class="share-btn">
                                <span class="btn-icon">üì§</span>
                                Í≥µÏú†ÌïòÍ∏∞
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ÏãúÎÇòÎ¶¨Ïò§ ÏÑ§Î™Ö -->
    <div class="scenario-description-section">
        <div class="container">
            <h2 class="section-title">üìñ ÏûëÌíà ÏÜåÍ∞ú</h2>
            <div class="description-content">
                <p class="scenario-description">{{ scenario.description }}</p>
                <div class="description-meta">
                    <span class="update-info">ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏: {{ formatDate(scenario.lastUpdate) }}</span>
                    <span class="status-info" :class="scenario.status">{{ getStatusText(scenario.status) }}</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ÏóêÌîºÏÜåÎìú Î™©Î°ù -->
    <div class="episodes-section">
        <div class="container">
            <div class="episodes-header">
                <h2 class="section-title">üìö ÏóêÌîºÏÜåÎìú Î™©Î°ù</h2>
                <div class="episodes-info">
                    <span class="free-info">üéÅ {{ freeEpisodeCount }}ÌôîÍπåÏßÄ Î¨¥Î£å</span>
                    <span class="total-info">Ï†ÑÏ≤¥ {{ scenario.episodeCount }}Ìôî</span>
                </div>
            </div>
            
            <!-- ÏóêÌîºÏÜåÎìú Î¶¨Ïä§Ìä∏ -->
            <div class="episodes-list">
                <div 
                    v-for="(episode, index) in episodes" 
                    :key="episode.id"
                    class="episode-item"
                    :class="{
                        'free': episode.isFree,
                        'premium': !episode.isFree,
                        'locked': !episode.isFree && !scenario.isPurchased,
                        'current': currentEpisode === episode.id
                    }"
                    @click="selectEpisode(episode, index)"
                >
                    <div class="episode-number">{{ episode.number }}Ìôî</div>
                    <div class="episode-info">
                        <h3 class="episode-title">{{ episode.title }}</h3>
                        <p class="episode-preview">{{ episode.preview }}</p>
                        <div class="episode-meta">
                            <span class="episode-date">{{ formatDate(episode.publishDate) }}</span>
                            <span class="episode-length">{{ episode.readTime }}Î∂Ñ</span>
                            <span v-if="episode.isNew" class="episode-badge new">NEW</span>
                        </div>
                    </div>
                    <div class="episode-status">
                        <span v-if="episode.isFree" class="status-badge free">Î¨¥Î£å</span>
                        <span v-else-if="scenario.isPurchased" class="status-badge purchased">Íµ¨Îß§ÏôÑÎ£å</span>
                        <span v-else class="status-badge premium">
                            <span class="premium-icon">üíé</span>
                            {{ formatPrice(episode.price) }}
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- ÏóêÌîºÏÜåÎìú Î∑∞Ïñ¥ -->
    <div v-if="selectedEpisode" class="episode-viewer">
        <div class="viewer-header">
            <h2>{{ selectedEpisode.number }}Ìôî: {{ selectedEpisode.title }}</h2>
            <button @click="closeViewer" class="close-viewer">‚úï</button>
        </div>
        
        <div class="viewer-content">
            <!-- Î¨¥Î£å ÎØ∏Î¶¨Î≥¥Í∏∞ ÏΩòÌÖêÏ∏† -->
            <div v-if="selectedEpisode.isFree || scenario.isPurchased" class="episode-content">
                <div v-html="selectedEpisode.content" class="content-text"></div>
            </div>
            
            <!-- Ïú†Î£å ÏΩòÌÖêÏ∏† Ïû†Í∏à ÌôîÎ©¥ -->
            <div v-else class="premium-lock">
                <!-- Î¨¥Î£å ÎØ∏Î¶¨Î≥¥Í∏∞ (10%) -->
                <div class="preview-content">
                    <div class="preview-header">
                        <h3>üéÅ Î¨¥Î£å ÎØ∏Î¶¨Î≥¥Í∏∞</h3>
                        <p>Ïù¥ ÏóêÌîºÏÜåÎìúÏùò {{ previewPercentage }}%Î•º Î¨¥Î£åÎ°ú Ï†úÍ≥µÌï©ÎãàÎã§.</p>
                    </div>
                    <div v-html="selectedEpisode.previewContent" class="content-text preview"></div>
                </div>
                
                <!-- Í≤∞Ï†ú Ïú†ÎèÑ ÏÑπÏÖò -->
                <div class="payment-prompt">
                    <div class="lock-overlay">
                        <div class="lock-icon">üîí</div>
                        <h3>ÌîÑÎ¶¨ÎØ∏ÏóÑ ÏΩòÌÖêÏ∏†</h3>
                        <p>Ïù¥ ÏóêÌîºÏÜåÎìúÏùò Ï†ÑÏ≤¥ ÎÇ¥Ïö©ÏùÑ Î≥¥Î†§Î©¥ Íµ¨Îß§Í∞Ä ÌïÑÏöîÌï©ÎãàÎã§.</p>
                        
                        <div class="payment-options">
                            <button @click="purchaseEpisode(selectedEpisode)" class="purchase-episode-btn">
                                <span class="btn-icon">üíé</span>
                                Ïù¥ ÏóêÌîºÏÜåÎìúÎßå Íµ¨Îß§ ({{ formatPrice(selectedEpisode.price) }})
                            </button>
                            
                            <button @click="purchaseOption('full')" class="purchase-full-btn">
                                <span class="btn-icon">üéØ</span>
                                Ï†ÑÏ≤¥ Íµ¨Îß§ÌïòÍ≥† {{ scenario.discount }}% Ìï†Ïù∏Î∞õÍ∏∞
                            </button>
                        </div>
                        
                        <div class="payment-benefits">
                            <h4>Íµ¨Îß§ ÌòúÌÉù</h4>
                            <ul>
                                <li>‚úì ÌèâÏÉù Î¨¥Ï†úÌïú Ïù¥Ïö©</li>
                                <li>‚úì Ïò§ÌîÑÎùºÏù∏ Îã§Ïö¥Î°úÎìú</li>
                                <li>‚úì Í¥ëÍ≥† ÏóÜÎäî ÍπîÎÅîÌïú ÏùΩÍ∏∞</li>
                                <li>‚úì ÏÉà ÏóêÌîºÏÜåÎìú Ïö∞ÏÑ† ÏïåÎ¶º</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Î∑∞Ïñ¥ ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <div class="viewer-navigation">
            <button 
                @click="navigateEpisode('prev')" 
                :disabled="selectedEpisodeIndex === 0"
                class="nav-btn prev-btn"
            >
                ‚Üê Ïù¥Ï†Ñ Ìôî
            </button>
            
            <div class="episode-progress">
                <span>{{ selectedEpisodeIndex + 1 }} / {{ episodes.length }}</span>
                <div class="progress-bar">
                    <div 
                        class="progress-fill" 
                        :style="{ width: ((selectedEpisodeIndex + 1) / episodes.length * 100) + '%' }"
                    ></div>
                </div>
            </div>
            
            <button 
                @click="navigateEpisode('next')" 
                :disabled="selectedEpisodeIndex === episodes.length - 1"
                class="nav-btn next-btn"
            >
                Îã§Ïùå Ìôî ‚Üí
            </button>
        </div>
    </div>
    
    <!-- Î¶¨Î∑∞ ÏÑπÏÖò -->
    <div class="reviews-section">
        <div class="container">
            <h2 class="section-title">‚≠ê ÎèÖÏûê Î¶¨Î∑∞</h2>
            
            <!-- Î¶¨Î∑∞ ÏûëÏÑ± -->
            <div class="review-form">
                <h3>Î¶¨Î∑∞ ÏûëÏÑ±ÌïòÍ∏∞</h3>
                <div class="rating-input">
                    <span>ÌèâÏ†ê:</span>
                    <div class="stars-input">
                        <span 
                            v-for="star in 5" 
                            :key="star"
                            class="star"
                            :class="{ active: star <= newReview.rating }"
                            @click="newReview.rating = star"
                        >‚òÖ</span>
                    </div>
                </div>
                <textarea 
                    v-model="newReview.content"
                    class="review-textarea"
                    placeholder="Ïù¥ ÏãúÎÇòÎ¶¨Ïò§Ïóê ÎåÄÌïú ÏÜîÏßÅÌïú ÌõÑÍ∏∞Î•º ÎÇ®Í≤®Ï£ºÏÑ∏Ïöî..."
                ></textarea>
                <button @click="submitReview" class="submit-review-btn" :disabled="!newReview.content.trim()">
                    Î¶¨Î∑∞ Îì±Î°ù
                </button>
            </div>
            
            <!-- Î¶¨Î∑∞ Î™©Î°ù -->
            <div class="reviews-list">
                <div 
                    v-for="review in reviews" 
                    :key="review.id"
                    class="review-item"
                >
                    <div class="review-header">
                        <div class="reviewer-info">
                            <span class="reviewer-name">{{ review.username }}</span>
                            <div class="review-rating">
                                <span v-for="star in 5" :key="star" class="star" :class="{ filled: star <= review.rating }">‚òÖ</span>
                            </div>
                        </div>
                        <span class="review-date">{{ formatDate(review.date) }}</span>
                    </div>
                    <p class="review-content">{{ review.content }}</p>
                    <div class="review-actions">
                        <button class="review-like" :class="{ liked: review.isLiked }" @click="toggleReviewLike(review)">
                            üëç {{ review.likes }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>